<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <link rel="icon" type="image/png" href="/images/favicon.ico">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

  <title>Workspace</title>

  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />
    <script src="http://s.codepen.io/assets/libs/modernizr.js" type="text/javascript"></script>    
    <link rel="stylesheet" href="/stylesheets/reset.css">
    <link rel='stylesheet prefetch' href='http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css'>
        <link rel="stylesheet" href="/stylesheets/style.css">
    <link href='http://fonts.googleapis.com/css?family=Gloria+Hallelujah' rel='stylesheet' type='text/css'>

    <!-- Bootstrap core CSS     -->
    <link href="/stylesheets/bootstrap.min.css" rel="stylesheet" />



    <!--  Light Bootstrap Table core CSS    -->
    <link href="/stylesheets/light-bootstrap-dashboard.css" rel="stylesheet"/>


    <!--  CSS for Demo Purpose, don't include it in your project     -->
    <link href="/stylesheets/demo.css" rel="stylesheet" />


    <!--     Fonts and icons     -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>
    <link href="/stylesheets/pe-icon-7-stroke.css" rel="stylesheet" />

    <link rel="stylesheet" href="/stylesheets/jsplumb/css/jsPlumbToolkit-defaults.css">
    <link rel="stylesheet" href="/stylesheets/jsplumb/css/main.css">
    <link rel="stylesheet" href="/stylesheets/jsplumb/css/jsPlumbToolkit-demo.css">
    <link rel="stylesheet" href="/stylesheets/workspace/workspace.css">
</head>
<body>
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">x</span>
    <!-- <form name="containerOptions" id="containerOptions"> -->
    <label>Container ID:  </label><label id="container-id"></label><br/>
    Container Name*:  <input id="container-name" type="text" size=10 maxlength=10 required="required"/>
    <div style="position:absolute;left:25px;">
           
            <input type="checkbox" name="Angular1" value="Build"/> Build <textarea id="build" rows="1" style="width:200px;"></textarea>                       <br/>
            <input type="checkbox" name="Angular2" value="cap_add"/> Cap_add <textarea id="cap_add" rows="1" style="width:200px;">                        </textarea> <br/>
            <input type="checkbox" name="Angular3" value="cap_drop"/> Cap_drop <textarea id="cap_drop" rows="1" style="width:200px;">                         </textarea> <br/>
            <input type="checkbox" name="Angular4" value="Version"/> Version <br/>
                        <input type="radio" name="Version5" value="Version 1" style="position:absolute;left:40px;"/>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Version 1 <br/>
                        <input type="radio" name="Version6" value="Version 2" style="position:absolute;left:40px;"/>
                         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Version 2 <br/>
            <input type="checkbox" name="Angular7" value="Command"/> Command <textarea id="command" rows="1" style="width:200px;">                    </textarea> <br/>
            <input type="checkbox" name="Angular8" value="dns"/> dns  <br/>
            <input type="checkbox" name="Angular9" value="tmpfs"/> tmpfs  <br/>
            <input type="checkbox" name="Angular0" value="Expose"/> Expose <textarea id="expose" rows="1" style="width:200px;">                         </textarea> <br/>
            <input type="checkbox" name="Angular11" value="Env_var"/> Env_file <textarea id="env_file" rows="1" style="width:200px;">                   </textarea> <br/>
            <input type="checkbox" name="Angular22" value="Extends"/> Extends  <br/>
            <input type="checkbox" name="Angular33" value="net"/> net  <br/>
            <input type="checkbox" name="Angular44" value="Labels"/> Labels <textarea id="Lables" rows="1" style="width:200px;">                          </textarea><br/>
            <input type="checkbox" name="Angular55" value="Image"/> Image <textarea id="image" rows="1" style="width:200px;"></textarea>                   <br/>
            <input type="checkbox" name="Angular66" value="Network_Mode"/> Network_Mode <textarea id="Network_Mode" rows="1"                           style="width:200px;"></textarea>  <br/>
            <input type="checkbox" name="Angular77" value="ulimits"/> ulimits <textarea id="ulimits" rows="1" style="width:200px;">                    </textarea>  <br/>
            <input type="checkbox" name="Angular88" value="networks"/> Networks  <br/>
            <input type="checkbox" name="Angular99" value="pid"/> pid <br/>
            <input type="checkbox" name="Angular00" value="volume"/> Volume_driver <textarea id="Volume_driver" rows="1"                                 style="width:200px;"></textarea><br/>
            
            <input type="checkbox" name="Angular12" value="ports"/> Ports <textarea id="ports" rows="1" style="width:200px;"></textarea>
            <br/>

            <button type="submit" id="modal-create" onclick="modal_create()" style="font-size:10px;position:absolute;left:60px;" > Create </button> 
            <br/>
            <button type="submit" id="modal-save" onclick="modal_save()" style="font-size:10px;position:absolute;left:60px;visibility:hidden;" > Save </button>      
            </div>
            
            
  </div></div>
<div class="main-panel">
        <nav class="navbar navbar-default navbar-fixed">
            
            <div class="container-fluid">
                <div id="stage" style="background:#00008B">
                        <h3 id="spinner" style="background: #4d4dff; text-align: center; color: #fff;">PAWN</h3>
                    </div>
                
                <div class="collapse navbar-collapse">
                    
                    <ul class="nav navbar-nav navbar-left" style="position:absolute;right:20px;top:10px;">
                        <li>
                           <a href="/">
                               Home
                            </a>
                        </li>
                        <li>
                           <a href="/dashboard">
                               Dashboard
                            </a>
                        </li>
                        <li>
                           <a href="/projects">
                               Projects
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        
    </div>
<div class="wrapper">
    <div class="sidebar" data-color="azure" data-image="/images/sidebar-5.jpg">

    <!--

        Tip 1: you can change the color of the sidebar using: data-color="blue | azure | green | orange | red | purple"
        Tip 2: you can also add an image using data-image tag

    -->

      <div class="sidebar-wrapper" >
                <h3 style="position:absolute;left:75px;color:black;">Images</h3>
            <ul class="nav" style="position:absolute;left:80px;top:50px;">
                
                <li class="active">
                    <p onclick="openNav()">Angular js <br><img id="drag1" style="background:#222;" src="/images/a.jpg" draggable="true" ondragstart="drag(event)" onclick="clicked(this)" width="90" height="75"></p>
                </li>
                <li>
                    <p onclick="openNav1()">Facebook<br><img id="drag2" style="background:#339;" src="/images/f.png" draggable="true" ondragstart="drag(event)" onclick="clicked(this)" width="90" height="75"></p>
                </li>
                <li>
                    <p onclick="openNav2()">Mongo db<br><img id="drag3" style="background:#090;" src="/images/m.png" draggable="true" ondragstart="drag(event)" onclick="clicked(this)" width="90" height="75"></p>
                </li>
                <li>
                   <p onclick="openNav3()">Node js<br><img id="drag4" style="background:#500;" src="/images/n.jpg" draggable="true" ondragstart="drag(event)" onclick="clicked(this)" width="90" height="75"></p>
                </li>
                <li>
                   <p onclick="openNav4()">Sql<br><img id="drag5" style="background:#888;" src="/images/s.png" draggable="true" ondragstart="drag(event)" onclick="clicked(this)" width="90" height="75"></p>
                </li>
                
            </ul>
      </div>
    </div>
  
    <div id="wrapper" ondrop="drop(event)" ondragover="allowDrop(event)"; style="position:absolute;top:68px;left:280px;" >
              <div class="jtk-demo-main" id="workspace-canvas">
        <!-- demo -->
        <div class="jtk-demo-canvas canvas-wide flowchart-demo jtk-surface jtk-surface-nopan" id="canvas">

          

            <div class="group-container" id="container3" group="three">
                <div class="title"></div>
                <!-- <ul>
                    <li>Elements may be dragged outside bounds (<strong>revert:false</strong>)</li>
                    <li>Elements are draggable to other groups</li>
                    <li>Deletes group only</li>
                </ul> -->
                <div class="del"></div>
                <div class="node-collapse"></div>
                <div id="c3_1" class="w" ondblclick="openConfig(this)" style="left:30px;top:35px">3.1</div>
                <div id="c3_2" class="w" ondblclick="openConfig(this)" style="left:80px;top:162px">3.2</div>
            </div>

           
            <div class="w" id="standalone" ondblclick="openConfig(this)" style="left:455px;top:280px;display:none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

           
            
        </div>
        
    </div>
        </p>
        <ul style="position:absolute;top:10px;right:10px;">
             <li><button type="submit" onclick="save_diagram()" style="height:40px;width:60px;"><a href="#save"><strong>Save   </strong></a> </button></li>
             <li><button type="submit" style="height:40px;width:60px;"><a href="#create"><strong>Create </strong> </a></button></li>
             <li><button type="submit" style="height:40px;width:60px;"><a href="#delete"><strong>Delete </strong></a></button></li>
             <li><button type="submit" style="height:40px;width:60px;"><a href="dashboard.ejs"><strong>Exit</strong></a></button></li>
        </ul>
            
    </div>
   

    </div>
    
    

</body>

    <!--   Core JS Files   -->
<script src="/javascripts/jquery-1.10.2.js" type="text/javascript"></script>
<script src="/javascripts/bootstrap.min.js" type="text/javascript"></script>

  <!--  Checkbox, Radio & Switch Plugins -->
<script src="/javascripts/bootstrap-checkbox-radio-switch.js"></script>

  <!--  Charts Plugin -->
<script src="/javascripts/chartist.min.js"></script>


<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>

    <!-- Light Bootstrap Table Core javascript and methods for Demo purpose -->
<script src="/javascripts/light-bootstrap-dashboard.js"></script>

  <!-- Light Bootstrap Table DEMO methods, don't include it in your project! 
  <script src="/javascripts/demo.js"></script>
   JS -->
<!-- support lib for bezier stuff -->
<script src="/javascripts/jsplumb/lib/jsBezier-0.8.js"></script>
<!-- event adapter -->
<script src="/javascripts/jsplumb/lib/mottle-0.7.4.js"></script>
<!-- geometry functions -->
<script src="/javascripts/jsplumb/lib/biltong-0.3.js"></script>
<!-- drag -->
<script src="/javascripts/jsplumb/lib/katavorio-0.18.0.js"></script>
<!-- jsplumb util -->
<script src="/javascripts/jsplumb/src/util.js"></script>
<script src="/javascripts/jsplumb/src/browser-util.js"></script>
<!-- main jsplumb engine -->
<script src="/javascripts/jsplumb/src/jsPlumb.js"></script>
<!-- base DOM adapter -->
<script src="/javascripts/jsplumb/src/dom-adapter.js"></script>
<script src="/javascripts/jsplumb/src/overlay-component.js"></script>
<!-- endpoint -->
<script src="/javascripts/jsplumb/src/endpoint.js"></script>
<!-- connection -->
<script src="/javascripts/jsplumb/src/connection.js"></script>
<!-- anchors -->
<script src="/javascripts/jsplumb/src/anchors.js"></script>
<!-- connectors, endpoint and overlays  -->
<script src="/javascripts/jsplumb/src/defaults.js"></script>
<!-- bezier connectors -->
<script src="/javascripts/jsplumb/src/connectors-bezier.js"></script>
<!-- state machine connectors -->
<script src="/javascripts/jsplumb/src/connectors-statemachine.js"></script>
<!-- flowchart connectors -->
<script src="/javascripts/jsplumb/src/connectors-flowchart.js"></script>
<!-- straight connectors -->
<script src="/javascripts/jsplumb/src/connectors-straight.js"></script>
<!-- SVG renderer -->
<script src="/javascripts/jsplumb/src/renderers-svg.js"></script>

<!-- common adapter -->
<script src="/javascripts/jsplumb/src/base-library-adapter.js"></script>
<!-- no library jsPlumb adapter -->
<script src="/javascripts/jsplumb/src/dom.jsPlumb.js"></script>

<script src="/javascripts/jsplumb/src/group.js"></script>
<script src="/javascripts/workspace/workspace.js"></script>

<script type="text/javascript">
  var containerID;
  var shouldntHappen = function() {
    console.log('THIS SHOULDN HAPPEN');
  };
  function allowDrop(ev)
  {
    ev.preventDefault();
  }
  function drag(ev)
  {
    ev.dataTransfer.setData("Text",ev.target.id);
  }
  function drop(ev)
  {
    containerID="cont_"+ Math.floor(Math.random((Math.random() * 1000) + 1)*1000);
    document.getElementById("container-id").innerHTML=containerID;
    document.getElementById("modal-create").style.visibility='visible';
    document.getElementById("modal-save").style.visibility='hidden';
    modal.style.display = "block";
  }

//This function is called after the modal is submitted successfullly
  var cloneStandalone = function(name){
    var newbox = dragMe.cloneNode(true);
    newbox.id=containerID
    newbox.style.display = "block";
//TODO: NEXT LINEEEE
    newbox.innerHTML=name+'<br/>'+containerID;
    newbox.style=document.getElementById("standalone").style;
    document.getElementById('canvas').appendChild(newbox);
    var j = window.j;
    j.draggable(newbox.id);

//Anchors for the newly dropped node
    var exampleDropOptions = {
      tolerance: "touch",
      hoverClass: "dropHover",
      activeClass: "dragActive"
    };
    var color2 = "#316b31";
    var exampleEndpoint2 = {
      endpoint: ["Dot", { radius: 5 }],
      paintStyle: { fill: color2 },
      isSource: true,
      scope: "green",
      connectorStyle: { stroke: color2, strokeWidth: 6 },
      connector: ["Bezier", { curviness: 63 } ],
      maxConnections: 3,
      isTarget: true,
      dropOptions: exampleDropOptions
    };
    var anchors = [
                    [1, 0.2, 1, 0],
                    [0.8, 1, 0, 1],
                    [0, 0.8, -1, 0],
                    [0.2, 0, 0, -1]
                  ];

    j.addEndpoint(newbox.id, { anchor: anchors}, exampleEndpoint2);
  }

//This function is called when a node is dropped
  var modal_create = function() {
//Get all the values from the modal box and save it in the sessionStorage of the browser
//***********
    var containername = document.getElementById("container-name").value;

//End - values from modal box
    cloneStandalone(containername);
    modal.style.display = "none";
    updateSessionValues(containerID,containername);
//var obj = JSON.parse(sessionStorage.user);

  }
  var modal_save = function(){
//***************
    var name = document.getElementById("container-name").value;
    var id = document.getElementById("container-id").value;
    document.getElementById(id).innerHTML=name+'<br/>'+id;
    updateSessionValues(id,name);
    modal.style.display = "none";
  }

//Element that is to be cloned!
  var dragMe = document.getElementById('standalone');
  var modal = document.getElementById('myModal');
// Get the button that opens the modal
  var btn = document.getElementById("myBtn");
// Get the <span> element that closes the modal
  var span = document.getElementsByClassName("close")[0];

  span.onclick = function() {
    modal.style.display = "none";
  }

    
  var save_diagram=function(){
    //Save the entire diagram !!!
  }

  var openConfig=function(cont){
    var obj = JSON.parse(sessionStorage.getItem(cont.id));
    updateModalValues(obj.id,obj.name);
    document.getElementById("modal-create").style.visibility='hidden';
    document.getElementById("modal-save").style.visibility='visible';
    modal.style.display = "block";
  }

//Update the values of the modal with the passed values!! This avoids a lot of repeatition!
  var updateModalValues=function(id,name){
    document.getElementById("container-id").value=id;
    document.getElementById("container-name").value=name;
  }
//Update the values of the modal with the passed values!! This avoids a lot of repeatition!
  var updateSessionValues=function(id,name){
    var containerConfig = {
                            'id':id,
                            'name':name
                          };
    sessionStorage.setItem(id, JSON.stringify(containerConfig));
  }
</script>

</html>
